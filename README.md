# sample-nginx
a sample nginx container to display container name


| Field            | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Required |
|------------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| selector         | WorkloadSelector | The selector decides where to apply the authorization policy. The selector will match with workloads in the same namespace as the authorization policy. If the authorization policy is in the root namespace, the selector will additionally match with workloads in all namespaces. If not set, the selector will match all workloads.                                                                                                                                                                                                                          | No       |
| rules            | Rule[]          | A list of rules to match the request. A match occurs when at least one rule matches the request. If not set, the match will never occur. This is equivalent to setting a default of deny for the target workloads if the action is ALLOW.                                                                                                                                                                                                                                                                                                      | No       |
| action           | Action          | Specifies the action to take if the request is matched with the rules. Default is ALLOW if not specified.                                                                                                                                                                                                                                                                                                                                                                                                                                                | No       |
| provider         | ExtensionProvider (oneof) | Specifies detailed configuration of the CUSTOM action. Must be used only with CUSTOM action.                                                                                                                                                                                                                                                                                                                                                                                                                                                     | No       |
| from             | From[]          | From specifies the source of a request. If not set, any source is allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | No       |
| to               | To[]            | To specifies the operation of a request. If not set, any operation is allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | No       |
| when             | Condition[]     | When specifies a list of additional conditions of a request. If not set, any condition is allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | No       |
| principals       | string[]        | A list of peer identities derived from the peer certificate. The peer identity is in the format of "<TRUST_DOMAIN>/ns/<NAMESPACE>/sa/<SERVICE_ACCOUNT>", for example, "cluster.local/ns/default/sa/productpage". This field requires mTLS enabled and is the same as the source.principal attribute. If not set, any principal is allowed.                                                                                                                                                                                                                                 | No       |
| notPrincipals    | string[]        | A list of negative match of peer identities.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | No       |
| requestPrincipals | string[]        | A list of request identities derived from the JWT. The request identity is in the format of "<ISS>/<SUB>", for example, "example.com/sub-1". This field requires request authentication enabled and is the same as the request.auth.principal attribute. If not set, any request principal is allowed.                                                                                                                                                                                                                                                | No       |
| notRequestPrincipals | string[]    | A list of negative match of request identities.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No       |
| namespaces       | string[]        | A list of namespaces derived from the peer certificate. This field requires mTLS enabled and is the same as the source.namespace attribute. If not set, any namespace is allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                          | No       |
| notNamespaces    | string[]        | A list of negative match of namespaces.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | No       |
| ipBlocks         | string[]        | A list of IP blocks, populated from the source address of the IP packet. Single IP (e.g. “203.0.113.4”) and CIDR (e.g. “203.0.113.0/24”) are supported. This is the same as the source.ip attribute. If not set, any IP is allowed.                                                                                                                                                                                                                                                                                                                                                                                     | No       |
| notIpBlocks      | string[]        | A list of negative match of IP blocks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | No       |
| remoteIpBlocks   | string[]        | A list of IP blocks, populated from X-Forwarded-For header or proxy protocol. To make use of this field, you must configure the numTrustedProxies field of the gatewayTopology under the meshConfig when you install Istio or using an annotation on the ingress gateway. See the documentation here: [Configuring Gateway Network Topology](https://istio.io/latest/docs/reference/config/installation-options/#gateway-topology). Single IP (e.g. “203.0.113.4”) and CIDR (e.g. “203.0.113.0/24”) are supported. This is the same as the remote.ip attribute. If not set, any IP is allowed. | No       |
| notRemoteIpBlocks | string[]      | A list of negative match of remote IP blocks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | No       |
| hosts            | string[]        | The hosts associated with the ServiceEntry. Could be a DNS name with wildcard prefix. The hosts field is used to select matching hosts in VirtualServices and DestinationRules. For HTTP traffic, the HTTP Host/Authority header will be matched against the hosts field. For HTTPs or TLS traffic containing Server Name Indication (SNI), the SNI value will be matched against the hosts field. If the hostname matches with the name of a service from another service registry such as Kubernetes that also supplies its own set of endpoints, the ServiceEntry will be treated as a decorator of the existing Kubernetes service. Properties in the service entry will be added to the Kubernetes service if applicable. Currently, only the following additional properties will be considered by istiod: subjectAltNames: In addition to verifying the SANs of the service accounts associated with the pods of the service, the SANs specified here will also be verified. | Yes |
| addresses        | string[]        | The virtual IP addresses associated with the service. Could be CIDR prefix. For HTTP traffic, generated route configurations will include http route domains for both the addresses and hosts field values, and the destination will be identified based on the HTTP Host/Authority header. If one or more IP addresses are specified, the incoming traffic will be identified as belonging to this service if the destination IP matches the IP/CIDRs specified in the addresses field. If the Addresses field is empty, traffic will be identified solely based on the destination port. In such scenarios, the port on which the service is being accessed must not be shared by any other service in the mesh. In other words, the sidecar will behave as a simple TCP proxy, forwarding incoming traffic on a specified port to the specified destination endpoint IP/host. Unix domain socket addresses are not supported in this field. | No |
| ports            | ServicePort[]    | The ports associated with the external service. If the Endpoints are Unix domain socket addresses, there must be exactly one port.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Yes |
| location         | Location         | Specify the location of the service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | No       |
| resolution       | Resolution       | Service resolution mode for the hosts. Care must be taken when setting the resolution mode to NONE for a TCP port without accompanying IP addresses. In such cases, traffic to any IP on said port will be allowed (i.e. 0.0.0.0:<port>).                                                                                                                                                                                                                                                                                                                                                                                                 | Yes      |
| endpoints        | WorkloadEntry[]  | One or more endpoints associated with the service. Only one of endpoints or workloadSelector can be specified.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | No       |
| workloadSelector | WorkloadSelector | Applicable only for MESH_INTERNAL services. Only one of endpoints or workloadSelector can be specified. Selects one or more Kubernetes pods or VM workloads (specified using WorkloadEntry) based on their labels. The WorkloadEntry object representing the VMs should be defined in the same namespace as the ServiceEntry.                                                                                                                                                                                                                                                                                                                                                                     | No       |
| exportTo         | string[]        | A list of namespaces to which this destination rule is exported. The resolution of a destination rule to apply to a service occurs in the context of a hierarchy of namespaces. Exporting a destination rule allows it to be included in the resolution hierarchy for services in other namespaces. This feature provides a mechanism for service owners and mesh administrators to control the visibility of destination rules across namespace boundaries. If no namespaces are specified then the destination rule is exported to all namespaces by default. The value “.” is reserved and defines an export to the same namespace that the destination rule is declared in. Similarly, the value “*” is reserved and defines an export to all namespaces. | No |
| subjectAltNames  | string[]        | If specified, the proxy will verify that the server certificate’s subject alternate name matches one of the specified values. NOTE: When using the workloadEntry with workloadSelectors, the service account specified in the workloadEntry will also be used to derive the additional subject alternate names that should be verified.                                                                                                                                                                                                                                                                                                                                                                    | No       |
| host             | string          | The name of a service from the service registry. Service names are looked up from the platform’s service registry (e.g., Kubernetes services, Consul services, etc.) and from the hosts declared by ServiceEntries. Rules defined for services that do not exist in the service registry will be ignored. Note for Kubernetes users: When short names are used (e.g. “reviews” instead of “reviews.default.svc.cluster.local”), Istio will interpret the short name based on the namespace of the rule, not the service. A rule in the “default” namespace containing a host “reviews” will be interpreted as “reviews.default.svc.cluster.local”, irrespective of the actual namespace associated with the reviews service. To avoid potential misconfigurations, it is recommended to always use fully qualified domain names over short names. Note that the host field applies to both HTTP and TCP services. | Yes      |
| trafficPolicy    | TrafficPolicy    | Traffic policies to apply (load balancing policy, connection pool sizes, outlier detection).                                                                                                                                                                                                                                                                                                                                                                 | No       |
| subsets          | Subset[]        | One or more named sets that represent individual versions of a service. Traffic policies can be overridden at subset level.                                                                                                                                                                                                                                                                                                                                | No       |
| exportTo         | string[]        | A list of namespaces to which this destination rule is exported. The resolution of a destination rule to apply to a service occurs in the context of a hierarchy of namespaces. Exporting a destination rule allows it to be included in the resolution hierarchy for services in other namespaces. This feature provides a mechanism for service owners and mesh administrators to control the visibility of destination rules across namespace boundaries. If no namespaces are specified then the destination rule is exported to all namespaces by default. The value “.” is reserved and defines an export to the same namespace that the destination rule is declared in. Similarly, the value “*” is reserved and defines an export to all namespaces. | No       |
| workloadSelector | WorkloadSelector | Criteria used to select the specific set of pods/VMs on which this DestinationRule configuration should be applied. If specified, the DestinationRule configuration will be applied only to the workload instances matching the workload selector label in the same namespace. Workload selectors do not apply across namespace boundaries. If omitted, the DestinationRule falls back to its default behavior. For example, if specific sidecars need to have egress TLS settings for services outside of the mesh, instead of every sidecar in the mesh needing to have the configuration (which is the default behavior), a workload selector can be specified. | No       |





| location     | Location         | Specify the location of the service.                                                                                                                                                                                                                                   | No       |
|--------------|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| MESH_EXTERNAL | MESH_EXTERNAL | Signifies that the service is external to the mesh. Typically used to indicate external services consumed through APIs.                                                                                                                                              |          |
| MESH_INTERNAL | MESH_INTERNAL | Signifies that the service is part of the mesh. Typically used to indicate services added explicitly as part of expanding the service mesh to include unmanaged infrastructure (e.g., VMs added to a Kubernetes based service mesh). |          |




| resolution   | Resolution       | Service resolution mode for the hosts.                                                                                                                                                                                                                                | Yes      |
|--------------|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| NONE         | NONE            | Assume that incoming connections have already been resolved (to a specific destination IP address). Such connections are typically routed via the proxy using mechanisms such as IP table REDIRECT/ eBPF. After performing any routing-related transformations, the proxy will forward the connection to the IP address to which the connection was bound. |          |
| STATIC       | STATIC          | Use the static IP addresses specified in endpoints (see below) as the backing instances associated with the service.                                                                                                                                              | Yes      |
| DNS          | DNS             | Attempt to resolve the IP address by querying the ambient DNS, asynchronously. If no endpoints are specified, the proxy will resolve the DNS address specified in the hosts field if wildcards are not used. If endpoints are specified, the DNS addresses specified in the endpoints will be resolved to determine the destination IP address. DNS resolution cannot be used with Unix domain socket endpoints. | Yes      |
| DNS_ROUND_ROBIN | DNS_ROUND_ROBIN | Attempt to resolve the IP address by querying the ambient DNS, asynchronously. Unlike DNS, DNS_ROUND_ROBIN only uses the first IP address returned when a new connection needs to be initiated without relying on complete results of DNS resolution, and connections made to hosts will be retained even if DNS records change frequently, eliminating draining connection pools and connection cycling. This is best suited for large web-scale services that must be accessed via DNS. The proxy will resolve the DNS address specified in the hosts field if wildcards are not used. DNS resolution cannot be used with Unix domain socket endpoints. | Yes      |



| Field            | Type            | Description                                                                                                                                                                                                 | Required |
|------------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| metadata         | ObjectMeta      | The metadata for the Network Policy, including its name, namespace, and labels.                                                             | Yes      |
| spec             | NetworkPolicySpec | The specification for the Network Policy rules.                                                                                                      | Yes      |
| podSelector      | LabelSelector   | Selects the pods to which the policy applies based on labels.                                                                                   | No       |
| policyTypes      | [String]        | The types of policies applied, such as "Ingress," "Egress," or both.                                                                            | No       |
| ingress          | [NetworkPolicyIngressRule] | A list of ingress rules specifying how traffic is allowed to flow to pods.                | No       |
| egress           | [NetworkPolicyEgressRule]  | A list of egress rules specifying how traffic is allowed to flow from pods.                  | No       |
| externalEntities | [String]        | List of external entities (CIDR ranges, IP blocks, etc.) that the Network Policy applies to. | No       |
| priority         | Int             | Priority indicates the order in which Network Policies are applied. Higher numbers indicate higher priority.                        | No       |
| defaultAction    | String          | The default action to be taken if no rules match. Options include "Allow" or "Deny."                                                            | No       |
